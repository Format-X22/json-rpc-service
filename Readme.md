# GRIBOYEDOV  
  
**GRIBOYEDOV** является набором корневых классов и утилит для микросервисов [golos.io](https://golos.io).  
Основные возможности:

  - Базовый класс виртуального сервиса, на основе которого строятся все микросервисы.    
  Каждый микросервис содержит в себе 1 или более виртуальных сервисов, работающих асинхронно и скомпанованных в древовидную структуру зависимостей.  
  Базовый класс предлагает общий интерфейс и некоторые утилитные методы для работы, подробнее в описании самого класса.
  
  - Виртуальный сервис для подписки на блоки, генерируемые блокчейном GOLOS.
  
  - Виртуальный сервис восстановления пропущенный блоков на случай если микросервис был перезапущен или произошло что-либо иное подобное.  
  
  - Виртуальный сервис работы с базой данных MongoDB, используя Mongoose.
  
  - Виртуальный сервис связи микросервисов, позволяющий осуществлять двухстороннюю связь между микросервисами через HTTP, используя JSON-RPC, добавляя к этому возможность множественного ответа на единичный запрос JSON-RPC (например для подписки на что-либо).
  
  - Утилиты и обертки для работы со временем, логами и переменными окружения.
  
  - StatsD мониторинг.

Набор `ENV`, которые можно определять для корневых классов:

  - `MONGO_CONNECT_STRING` - строка подключения к базе MongoDB.  
   Дефолтное значение - `mongodb://0.0.0.0/admin` 

  - `DAY_START` - время начала нового дня в часах относительно UTC, используется для таких вещей как валидация "1 пост в сутки".    
   Дефолтное значение - `3` (день начинается в 00:00 по Москве). 

  - `BLOCKCHAIN_SUBSCRIBE_TIMEOUT` - таймаут подписки на новые блоки, срабатывает если за это время от блокчейн-ноды не пришло ни единого блока.  
   Дефолтное значение - `60000`, что равно одной минуте.
     
  - `BLOCKCHAIN_NODE_ADDRESS` - адрес блокчейн-ноды для прослушивания.  
   Дефолтное значение - `wss://ws.golos.io` 
     
  - `METRICS_HOST` - адрес хоста для метрик StatsD.  
   Дефолтное значение - `localhost` 
    
  - `METRICS_PORT` - адрес порта для метрик StatsD.  
   Дефолтное значение - `8125` 

  - `GATE_LISTEN_PORT` - адрес порта, который будет использован для входящих подключений связи микросервисов.    
   Дефолтное значение - `8080`
 
Набор особых `ENV` для алиасов микросервисов, определяющих URL доступа к предопределенным микросервисам:

  - `SOLZHENITSYN_CONNECT_STRING` - адрес подключения к микросервису настроек.
  
  - `BULGAKOV_CONNECT_STRING` - адрес подключения к микросервису фронтенд-гейта.
  
  - `NOTIFY_CONNECT_STRING` - адрес подключения к микросервису нотификаций. 
  
